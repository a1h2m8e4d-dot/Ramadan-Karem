<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¹Ø±Ø¶ Ø±Ù…Ø¶Ø§Ù† - Ø§ÙƒØ´Ø· ÙˆØ§Ø±Ø¨Ø­</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            color: #fff;
            overflow: hidden;
        }

        h1 { color: #fca311; text-shadow: 0 0 10px rgba(252, 163, 17, 0.5); margin-bottom: 20px; }

        .scratch-container {
            position: relative;
            width: 300px;
            height: 300px;
            border: 5px solid #fca311;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            user-select: none;
            background-color: #fff; /* Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡ Ø¹Ø´Ø§Ù† Ù„Ùˆ Ø§Ù„ØµÙˆØ±Ø© Ø­Ù…Ù„Øª Ø¨Ø¨Ø·Ø¡ */
        }

        .prize-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
            position: absolute;
            top: 0; left: 0; z-index: 1;
        }

        #scratchCanvas {
            position: absolute; top: 0; left: 0; z-index: 2;
            cursor: url('https://cdn-icons-png.flaticon.com/32/1048/1048953.png'), auto;
            border-radius: 10px;
            touch-action: none;
        }

        .message-box {
            display: none; /* Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #fca311;
        }
    </style>
</head>
<body>

    <div id="gameArea">
        <h1>ğŸŒ™ Ø§ÙƒØ´Ø· ÙƒØ±ØªÙƒ ÙŠØ§ Ø¨Ø·Ù„ ğŸŒ™</h1>
        <div class="scratch-container">
            <img id="prizeImg" src="" alt="Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©" class="prize-image">
            <canvas id="scratchCanvas"></canvas>
        </div>
        <p style="margin-top: 20px; opacity: 0.8;">Ø§Ù…Ø³Ø­ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠØ© Ø¨Ø¥ØµØ¨Ø¹Ùƒ</p>
    </div>

    <div id="lockedArea" class="message-box">
        <h1>â›” Ø¹ÙÙ€ÙˆØ§Ù‹!</h1>
        <p style="font-size: 1.5rem;">Ù„Ù‚Ø¯ Ø§Ø³ØªØ®Ø¯Ù…Øª Ù…Ø­Ø§ÙˆÙ„ØªÙƒ Ø¨Ø§Ù„ÙØ¹Ù„.</p>
        <p>ÙƒÙ„ Ø·Ø§Ù„Ø¨ Ù„Ù‡ ÙƒØ±Øª ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·.</p>
        <p style="color: #fca311; font-weight: bold;">Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…!</p>
    </div>

    <script>
        // ==========================================
        // 1. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª (Ø¹Ø¯Ù„ Ù‡Ù†Ø§ Ø¨Ø±Ø§Ø­ØªÙƒ)
        // ==========================================
        
        // Ø¯Ù‡ Ø§Ù„ÙƒØ±Øª Ø§Ù„Ù†Ø§Ø¯Ø± Ø¬Ø¯Ø§Ù‹ (Ø§Ù„Ù„ÙŠ Ø¹Ø§ÙŠØ²Ù‡ ÙŠØ¸Ù‡Ø± Ù„Ù‚Ù„ÙŠÙ„ÙŠÙ†)
        const rareCard = "rare_gift.jpg"; 
        
        // Ø¯ÙŠ Ø§Ù„ÙƒØ±ÙˆØª Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© (Ø§Ù„Ù„ÙŠ Ù‡ØªØ¸Ù‡Ø± Ù„Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù†Ø§Ø³)
        const commonCards = [
            "gift1.jpg.jpg", 
            "gift2.jpg", 
            "gift3.jpg",
			"gift4.jpg"
        ];

        // Ù†Ø³Ø¨Ø© Ø¸Ù‡ÙˆØ± Ø§Ù„ÙƒØ±Øª Ø§Ù„Ù†Ø§Ø¯Ø± (Ù…Ù† 100)
        // 5 ÙŠØ¹Ù†ÙŠ ÙØ±ØµØ© 5% (ÙŠØ¹Ù†ÙŠ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ 1 Ù…Ù† ÙƒÙ„ 20 Ø·Ø§Ù„Ø¨ Ù‡ÙŠØ´ÙˆÙÙ‡)
        // Ù„Ùˆ Ø¹Ø§ÙŠØ²Ù‡Ø§ Ù†Ø§Ø¯Ø±Ø© Ø¬Ø¯Ø§Ù‹ Ø®Ù„ÙŠÙ‡Ø§ 1 Ø£Ùˆ 0.5
        const rareChance = 2; 

        // ==========================================
        // 2. ÙƒÙˆØ¯ Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØ§Ù„Ù…Ù†Ø·Ù‚
        // ==========================================

        const gameArea = document.getElementById('gameArea');
        const lockedArea = document.getElementById('lockedArea');
        const prizeImg = document.getElementById('prizeImg');
        const canvas = document.getElementById('scratchCanvas');
        const ctx = canvas.getContext('2d');
        const container = document.querySelector('.scratch-container');

        // Ø¯Ø§Ù„Ø© Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø¸
        function selectPrize() {
            // ØªÙˆÙ„ÙŠØ¯ Ø±Ù‚Ù… Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù…Ù† 0 Ù„Ù€ 100
            const luck = Math.random() * 100;

            if (luck <= rareChance) {
                // Ù…Ø¨Ø±ÙˆÙƒ! Ø§Ù„ÙƒØ±Øª Ø§Ù„Ù†Ø§Ø¯Ø±
                return rareCard;
            } else {
                // Ø­Ø¸ Ø¹Ø§Ø¯ÙŠ: Ø§Ø®ØªØ§Ø± ØµÙˆØ±Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù…Ù† Ø§Ù„ØµÙˆØ± Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©
                const randomIndex = Math.floor(Math.random() * commonCards.length);
                return commonCards[randomIndex];
            }
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ù‡Ù„ Ù„Ø¹Ø¨ Ù‚Ø¨Ù„ ÙƒØ¯Ù‡ØŸ)
        function checkUserStatus() {
            // Ø¨Ù†Ø´ÙˆÙ Ù„Ùˆ ÙÙŠÙ‡ Ø¹Ù„Ø§Ù…Ø© ÙÙŠ Ù…ØªØµÙØ­Ù‡ Ø¨ØªÙ‚ÙˆÙ„ Ø¥Ù†Ù‡ Ù„Ø¹Ø¨
            const hasPlayed = localStorage.getItem('ramadan_promo_played');

            if (hasPlayed === 'true') {
                // Ù„Ùˆ Ù„Ø¹Ø¨ Ù‚Ø¨Ù„ ÙƒØ¯Ù‡ØŒ Ù†Ø®ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆÙ†Ø¸Ù‡Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù‚ÙÙ„
                gameArea.style.display = 'none';
                lockedArea.style.display = 'block';
            } else {
                // Ù„Ùˆ Ø¬Ø¯ÙŠØ¯ØŒ Ù†Ø¬Ù‡Ø² Ø§Ù„Ù„Ø¹Ø¨Ø©
                setupGame();
            }
        }

        function setupGame() {
            // 1. Ù†Ø­Ø¯Ø¯ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© ÙˆÙ†Ø­Ø·Ù‡Ø§
            const selectedPrize = selectPrize();
            prizeImg.src = selectedPrize;

            // 2. Ù†Ø¬Ù‡Ø² Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³ (Ø§Ù„ØºØ·Ø§Ø¡)
            canvas.width = container.offsetWidth;
            canvas.height = container.offsetHeight;
            
            ctx.fillStyle = '#C0C0C0';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#333';
            ctx.font = 'bold 30px Cairo';
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.fillText("Ø®Ø±Ø¨Ø´ Ù‡Ù†Ø§", canvas.width/2, canvas.height/2);

            // 3. Ø£ÙˆÙ„ Ù…Ø§ ÙŠÙ„Ù…Ø³ Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³ØŒ Ù†Ø³Ø¬Ù„ Ø¥Ù†Ù‡ Ù„Ø¹Ø¨ Ø®Ù„Ø§Øµ (Ø¹Ø´Ø§Ù† Ù„Ùˆ Ø¹Ù…Ù„ Ø±ÙŠÙØ±ÙŠØ´ ÙŠØªÙ‚ÙÙ„)
            // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¨Ù†Ø³Ø¬Ù„Ù‡Ø§ Ø£ÙˆÙ„ Ù…Ø§ Ø§Ù„ØµÙØ­Ø© ØªÙØªØ­ Ø¹Ø´Ø§Ù† Ù†Ø¶Ù…Ù† Ø¥Ù†Ù‡ Ù…ÙŠÙ‚Ø¹Ø¯Ø´ ÙŠØ¹Ù…Ù„ Ø±ÙŠÙØ±ÙŠØ´ Ù„Ø­Ø¯ Ù…Ø§ ØªØ¬ÙŠÙ„Ù‡ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© Ø§Ù„Ø­Ù„ÙˆØ©
            localStorage.setItem('ramadan_promo_played', 'true');
        }

        // ÙƒÙˆØ¯ Ø§Ù„Ø®Ø±Ø¨Ø´Ø© (Ø²ÙŠ Ù…Ø§ Ù‡Ùˆ)
        let isDrawing = false;
        function scratch(x, y) {
            ctx.globalCompositeOperation = 'destination-out';
            ctx.beginPath();
            ctx.arc(x, y, 25, 0, Math.PI * 2);
            ctx.fill();
        }

        canvas.addEventListener('mousedown', (e) => { isDrawing = true; scratch(e.offsetX, e.offsetY); });
        canvas.addEventListener('mousemove', (e) => { if (isDrawing) scratch(e.offsetX, e.offsetY); });
        canvas.addEventListener('mouseup', () => isDrawing = false);
        
        canvas.addEventListener('touchstart', (e) => {
            isDrawing = true;
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            scratch(e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top);
        }, {passive: false});
        canvas.addEventListener('touchmove', (e) => {
            if (isDrawing) {
                e.preventDefault();
                const rect = canvas.getBoundingClientRect();
                scratch(e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top);
            }
        }, {passive: false});

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        checkUserStatus();

    </script>
</body>

</html>
